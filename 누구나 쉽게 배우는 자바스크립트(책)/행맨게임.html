<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>행맨 게임 만들기  </title>
</head>
<body>
  <script>

  // 임의의 단어 배열을 만든다
  let words=[
    "javascript",
    "monkey",
    "amazing",
    "pancake"
  ];
//임의의 단어를 고른다
let word =words[Math.floor(Math.random()*words.length)];

//정답 배열을 설정한다
let answerArray = [];
for(let i = 0; i < word.length; i++){
  answerArray[i] = "_";//단어길이만큼 _생성
}
let remainingLetters = word.length;//단어의 글자 수 => 맞혀야 할 글자가 몇 개 남았는지 확인가능
let gameNumber = 5; //게임횟수 10번 제한

//게임 메인 반복문
// 단어를 맞히지 못하는 동안 계속 반복
//=>맞혀야할 글자 수가 남아있고 && 게임횟수가 0보다 클 때까지
while(remainingLetters > 0 && gameNumber > 0){
 
//   플레이어의 현재 진행상태를 보여준다.
 alert(answerArray.join(" "));//배열의 원소를 합쳐서 문자열로 보여줌
  
  //   플레이어가 추측한 글자를 가져온다.+대문자를 소문자로 바꾸기
  let guess = prompt("글자를 입력하세요. 취소를 누르면 게임을 멈춥니다.");
  //### 소문자 전환 콘솔에 왜 오류뜨나
  
  //   만약 플레이어가 게임을 중단하고 싶어하면{
      if(guess === null){
         // 게임을 종료한다.
        break; 
      
  // 그렇지 않고 만약 추측한 단어가 한 글자가 아니라면{
  // 한 글자만 고르라고 플레이어에게 알려준다.
  //  }
      }else if(guess.length !== 1){
        alert("한 글자만 입력해주세요.");
      }
  
  //   그렇지 않으면{
  //     만약 추측한 글자가 단어 안에 있으면{
  //       플레이어가 추측한 단어를 사용해 진행 상황을 업데이트 한다
  //     }
  //   }
  // }
  else{
    let answer=guess.toLowerCase();
    // 1개
        //answer가 answerArray에 같은 글자가 있는지 for문으로 한개씩 확인하고
        let same = false;
        for(let g=0; g<answerArray.length; g++){
          //같은게 있으면 same이 true가 된다.
          //조건문이 실행안된다.=> 게임횟수 차감이 안된다
         if(answer===answerArray[g]){
           
           same=true;
           break;
         }
        }
        if(same){
          continue;
        }
    //똑같은 글자가 입력되면 게임횟수가 2번씩 사라지는 오류 수정
    //=> 반복문 돌려서 입력한 값이 이미 답변에 있으면 2번째 입력값은 게임횟수를 차감하지 않는다
        let gameCount=false;
        for(let j = 0; j < word.length; j++){
          if(word[j] === answer){

            //??### 입력한 값이 answerArray에 아직 언더스코어로 남아있는지
            //만약 똑같은 글자가 있으면 same이 true가 된다.
             gameCount=true;
            //true면 게임횟수가 1개만 차감안된다.
            answerArray[j] = answer;
            remainingLetters--;  
           // gameNumber--;
            //
          };
        }
        if(gameCount){
          gameNumber--;
        }
         console.log(answer);
      console.log(gameNumber);
      }
     
}

  // 플레이어의 정답을 축하한다.가져온다
  alert(answerArray.join(" "));
 alert("잘 하셨어요! 정답은 "+word+" 입니다");

 



  </script>
</body>
</html>